"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function t(t,e,i){return e&&a(t.prototype,e),i&&a(t,i),t}var o=function(){function i(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(t){return{text:t}};if(n(this,i),!t)throw new Error("MirrorInput requires an element argument.");t.getAttribute&&(this.origin=t,this.copy="",this.spaces=null,this.editMode=!1,this.onUpdate=e,this.onOver=!1,this.actualValue=null,this.create())}return t(i,null,[{key:"setCaretPosition",value:function(t,e){var i;t.createTextRange?((i=t.createTextRange()).move("character",e),i.select()):(t.focus(),void 0!==t.selectionStart&&t.setSelectionRange(e,e))}}]),i}();o.prototype.update=function(){if(this.origin.setAttribute("actualValue",this.origin.value),this.actualValue=this.origin.value,this.origin.value){var t=this.onUpdate(this.origin.value),e=t.text;t.spaces&&(this.spaces=t.spaces),this.copy=e}else this.copy=""},o.prototype.swap=function(){var t=this.copy;this.copy=this.origin.value,this.origin.value=t},o.prototype.create=function(){var t,i=this,n=this.editMode,a=this.origin;a.addEventListener("blur",function(){n&&(n=!1,i.update(),i.swap())}),a.onkeyup=function(){return i.update()},a.onchange=function(){return i.update()},this.update(),i.swap(),t=["number","email","date"].includes(a.type)?function(){n||(n=!0,i.swap(),a.focus())}:function(t){if(!n){n=!0;var e=t.target.selectionStart;i.swap(),i.spaces?o.setCaretPosition(a,(i.spaces.slice(0,e).match(/1/g)||[]).length):o.setCaretPosition(a,e)}},a.onmouseup=function(){n||t()},a.onfocus=function(){n||(n=!0,i.swap())}};