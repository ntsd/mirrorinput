"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function t(e){if(n(this,t),!e)throw new Error("MirrorInput requires an element argument.");e.getAttribute&&(this.origin=e,this.parent=null,this.copy=null,this.spaces=null)};function t(){var t=document.getElementsByClassName("mirrorinput");Array.from(t).forEach(function(t){var e=new o(t),n=t.getAttribute("mirror-format");null!==n&&(e.onUpdate=window[n]),e.create(),t.onkeyup=function(){e.update()}})}function e(t){"loading"!=document.readyState?t():document.addEventListener?document.addEventListener("DOMContentLoaded",t):document.attachEvent("onreadystatechange",function(){"complete"==document.readyState&&t()})}o.prototype.originalFormat=function(t){return{text:t}},o.prototype.onUpdate=o.originalFormat,o.prototype.update=function(){if(this.copy){var t=this.onUpdate(this.origin.value),e=t.text;t.spaces&&(this.spaces=t.spaces),this.copy.value=e}},o.prototype.create=function(){var n=this;function o(t,e){var n;t.createTextRange?((n=t.createTextRange()).move("character",e),n.select()):(t.focus(),void 0!==t.selectionStart&&t.setSelectionRange(e,e))}var i=this.origin;this.parent=document.createElement("div"),this.parent.classList.add("mirrorinput-parent"),this.copy=i.cloneNode(!0),this.copy.id=this.copy.id+"Copy",this.copy.type="text",this.copy.classList.remove("mirrorinput"),this.copy.classList.add("mirrorinput-clone"),this.copy.autocomplete="off",this.copy.style["margin-top"]="-"+i.offsetHeight+"px",this.copy.addEventListener("mouseup",function(t){var e=t.target.selectionStart;n.spaces?o(i,(n.spaces.slice(0,e).match(/1/g)||[]).length):o(i,e)}),i.parentNode.insertBefore(this.parent,i),this.parent.appendChild(i),this.parent.appendChild(this.copy),this.update()},e(function(){t()});