"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function t(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}var a=function(){function n(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(t){return{text:t}};if(i(this,n),!t)throw new Error("MirrorInput requires an element argument.");t.getAttribute&&(this.origin=t,this.copy="",this.spaces=null,this.editMode=!1,this.onUpdate=e,this.onOver=!1,this.actualValue=null,this.create())}return t(n,null,[{key:"setCaretPosition",value:function(t,e){var n;t.createTextRange?((n=t.createTextRange()).move("character",e),n.select()):(t.focus(),void 0!==t.selectionStart&&t.setSelectionRange(e,e))}}]),n}();a.prototype.update=function(){if(this.origin.setAttribute("actualValue",this.origin.value),this.actualValue=this.origin.value,this.origin.value){var t=this.onUpdate(this.origin.value),e=t.text;t.spaces&&(this.spaces=t.spaces),this.copy=e}else this.copy=""},a.prototype.swap=function(){var t=this.copy;this.copy=this.origin.value,this.origin.value=t},a.prototype.create=function(){var t,e=this,n=this,i=this.editMode,o=this.origin;o.onblur=function(){i&&(i=!1,n.update(),n.swap())},o.onkeyup=function(){return n.update()},o.onchange=function(){return n.update()},this.update(),n.swap(),t=["number","email","date"].includes(o.type)?function(){i||(i=!0,n.swap(),o.focus())}:function(t){if(!i){i=!0;var e=t.target.selectionStart;n.swap(),n.spaces?a.setCaretPosition(o,(n.spaces.slice(0,e).match(/1/g)||[]).length):a.setCaretPosition(o,e)}},o.onmouseup=t,o.onmouseover=function(){e.onOver=!0},o.onmouseout=function(){e.onOver=!1},o.onfocus=function(){i||e.onOver||(i=!0,n.swap())}};