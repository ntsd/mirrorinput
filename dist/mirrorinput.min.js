"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var t=function t(e){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(t){return{text:t}};if(n(this,t),!e)throw new Error("MirrorInput requires an element argument.");e.getAttribute&&(this.origin=e,this.parent=null,this.copy=null,this.spaces=null,this.onUpdate=i,this.create())};t.prototype.update=function(){if(this.origin.value){var t=this.onUpdate(this.origin.value),e=t.text;t.spaces&&(this.spaces=t.spaces),this.copy.value=e}else this.copy.value=""},t.prototype.create=function(){var i=this;function n(t,e){var i;t.createTextRange?((i=t.createTextRange()).move("character",e),i.select()):(t.focus(),void 0!==t.selectionStart&&t.setSelectionRange(e,e))}var s=this.origin;this.copy=s.cloneNode(!0),this.copy.id=this.copy.id+"Copy",this.copy.classList.add("mirrorinput-clone"),this.copy.type="text",this.copy.autocomplete="off",this.copy.readOnly=!0,s.classList.add("mirrorinput-hidden");var t=this;s.onblur=function(){this.classList.add("mirrorinput-hidden"),t.update()},s.onkeyup=function(){t.update()},s.onchange=function(){t.update()},["number","email","date"].includes(s.type)?this.copy.onmouseup=function(){s.classList.remove("mirrorinput-hidden"),s.focus()}:this.copy.onmouseup=function(t){s.classList.remove("mirrorinput-hidden");var e=t.target.selectionStart;i.spaces?n(s,(i.spaces.slice(0,e).match(/1/g)||[]).length):n(s,e)},s.classList.add("mirrorinput"),this.parent=document.createElement("div"),this.parent.classList.add("mirrorinput-parent"),s.parentNode.insertBefore(this.parent,s),this.parent.appendChild(s),this.parent.appendChild(this.copy),this.update()};