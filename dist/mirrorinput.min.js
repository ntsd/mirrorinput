"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function t(e){if(n(this,t),!e)throw new Error("MirrorInput requires an element argument.");e.getAttribute&&(this.origin=e,this.parent=null,this.copy=null,this.spaces=null)};function t(){var t=document.getElementsByClassName("mirrorinput");Array.from(t).forEach(function(t){var e=new i(t),n=t.getAttribute("mirror-format");null!==n&&(e.onUpdate=window[n]),e.create(),t.onkeyup=function(){e.update()}})}function e(t){"loading"!=document.readyState?t():document.addEventListener?document.addEventListener("DOMContentLoaded",t):document.attachEvent("onreadystatechange",function(){"complete"==document.readyState&&t()})}i.prototype.originalFormat=function(t){return{text:t}},i.prototype.onUpdate=i.originalFormat,i.prototype.update=function(){if(this.copy){var t=this.onUpdate(this.origin.value),e=t.text;t.spaces&&(this.spaces=t.spaces),this.copy.value=e}},i.prototype.create=function(){var n=this;function i(t,e){var n;t.createTextRange?((n=t.createTextRange()).move("character",e),n.select()):(t.focus(),void 0!==t.selectionStart&&t.setSelectionRange(e,e))}var o=this.origin;this.parent=document.createElement("div"),this.parent.classList.add("mirrorinput-parent"),this.copy=o.cloneNode(!0),this.copy.id=this.copy.id+"Copy",this.copy.type="text",this.copy.classList.remove("mirrorinput"),this.copy.classList.add("mirrorinput-clone"),this.copy.style["margin-top"]="-"+o.offsetHeight+"px",this.copy.addEventListener("mouseup",function(t){var e=t.target.selectionStart;n.spaces?i(o,(n.spaces.slice(0,e).match(/1/g)||[]).length):i(o,e)}),o.parentNode.insertBefore(this.parent,o),this.parent.appendChild(o),this.parent.appendChild(this.copy),this.update()},e(function(){t()});