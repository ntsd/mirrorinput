"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var t=function t(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(t){return{text:t}};if(i(this,t),!e)throw new Error("MirrorInput requires an element argument.");e.getAttribute&&(this.origin=e,this.parent=null,this.copy=null,this.spaces=null,this.editMode=!1,this.onUpdate=n,this.onOver=!1,this.actualValue=null,this.create())};t.prototype.update=function(){if(this.origin.value){this.actualValue=this.origin.value;var t=this.onUpdate(this.origin.value),e=t.text;t.spaces&&(this.spaces=t.spaces),this.copy.innerHTML=e}else this.copy.innerHTML=""},t.prototype.swap=function(){var t=this.copy.innerHTML;this.copy.innerHTML=this.origin.value,this.origin.value=t},t.prototype.create=function(){var t=this;function n(t,e){var n;t.createTextRange?((n=t.createTextRange()).move("character",e),n.select()):(t.focus(),void 0!==t.selectionStart&&t.setSelectionRange(e,e))}var i=this,a=this.editMode,r=this.origin;this.copy=document.createElement("div");var e,s=this.copy;s.hidden=!0,s.id=s.id+"Copy",s.classList.add("mirrorinput-clone"),r.onblur=function(){a&&(a=!1,i.update(),i.swap())},r.onkeyup=function(){return i.update()},r.onchange=function(){return i.update()},r.classList.add("mirrorinput"),this.parent=document.createElement("div"),this.parent.classList.add("mirrorinput-parent"),r.parentNode.insertBefore(this.parent,r),this.parent.appendChild(r),this.parent.appendChild(s),this.update(),e=["number","email","date"].includes(r.type)?function(){a||(a=!0,i.swap(),r.focus())}:function(t){if(!a){a=!0;var e=t.target.selectionStart;i.swap(),i.spaces?n(r,(i.spaces.slice(0,e).match(/1/g)||[]).length):n(r,e)}},r.onmouseup=e,r.onmouseover=function(){t.onOver=!0},r.onmouseout=function(){t.onOver=!1},r.onfocus=function(){a||t.onOver||(a=!0,i.swap())},i.swap()};